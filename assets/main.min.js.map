{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","debounceTimer","init","_this","this","$","window","resize","onResize","hasClass","Product","length","clearTimeout","setTimeout","setGalleryDimensions","fixWidows","each","string","html","replace","imagesLoaded","productSelect","pickRelated","galleryWidth","windowWidth","width","galleryContainerWidth","css","bindGalleryDrag","left","unbindGalleryDrag","pep","axis","constrainTo","place","useCSSTranslation","unbind","selectCallback","variant","selector","available","removeClass","removeAttr","addClass","attr","productJson","JSON","parse","Shopify","OptionSelectors","product","onVariantSelected","pick","jQuery","document","ready"],"mappings":"AAGAA,MACEC,gBAAiB,IACjBC,cAAe,KACfC,KAAM,WACJ,GAAIC,GAAQC,IAEZC,GAAEC,QAAQC,OAAO,WACfJ,EAAMK,aAGJH,EAAE,QAAQI,SAAS,qBACrBN,EAAMO,QAAQR,QAKlBM,SAAU,WACR,GAAIL,GAAQC,IAERC,GAAE,oBAAoBM,SAExBC,aAAaT,EAAMF,eAEnBE,EAAMF,cAAgBY,WAAW,WAC/BV,EAAMO,QAAQI,uBACdF,aAAaT,EAAMF,eACnBE,EAAMF,cAAgB,MACrB,OAIPc,UAAW,WAETV,EAAE,kBAAkBW,KAAK,WACvB,GAAIC,GAASZ,EAAED,MAAMc,MACrBD,GAASA,EAAOE,QAAQ,YAAY,YACpCd,EAAED,MAAMc,KAAKD,OAOnBlB,KAAKW,SACHR,KAAM,WACJ,GAAIC,GAAQC,IAERC,GAAE,oBAAoBM,QACxBN,EAAE,oBAAoBe,aAAc,WAClCjB,EAAMW,yBAINT,EAAE,mBAAmBM,QACvBR,EAAMkB,gBAGJhB,EAAE,qBAAqBM,QACzBR,EAAMmB,eAIVR,qBAAsB,WACpB,GAAIX,GAAQC,KACRmB,EAAe,EACfC,EAAcnB,EAAEC,QAAQmB,OAQ5B,IANApB,EAAE,yBAAyBW,KAAK,WAC9BO,GAAgBlB,EAAED,MAAMqB,UAG1BpB,EAAE,wBAAwBoB,MAAMF,EAAe,GAE3CA,EAAeC,EAAa,CAC9B,GAAIE,GAAwBH,GAAgBA,EAAeC,EAE3DnB,GAAE,oBACCoB,MAAMC,EAAwB,GAC9BC,IAAI,OAAUH,EAAc,EAAME,EAAwB,EAAM,MAEnErB,EAAE,wBAAwBsB,IAAI,OAAUD,EAAwB,EAAMH,EAAe,EAAM,MAE3FpB,EAAMyB,sBAINvB,GAAE,oBACCoB,MAAMF,GACNI,IAAI,OAAUH,EAAc,EAAMD,EAAe,EAAM,MAE1DlB,EAAE,wBAAwBsB,KACxBE,KAAS,MAGX1B,EAAM2B,qBAKVF,gBAAiB,WACfvB,EAAE,wBAAwB0B,KACxBC,KAAM,IACNC,YAAa,SACbC,OAAO,EACPC,mBAAmB,IAClBR,IAAI,SAAU,cAInBG,kBAAmB,WACjBzB,EAAE0B,IAAIK,OAAO/B,EAAE,yBACfA,EAAE,wBAAwBsB,IAAI,SAAU,YAG1CU,eAAgB,SAASC,EAASC,GAC5BD,GAAWA,EAAQE,aAAc,GACnCnC,EAAE,uBAAuBoC,YAAY,gBACrCpC,EAAE,QAAQqC,WAAW,cAIrBrC,EAAE,uBAAuBsC,SAAS,gBAClCtC,EAAE,QAAQuC,KAAK,WAAY,cAI/BvB,cAAe,WACb,GAAIlB,GAAQC,KACRyC,EAAcC,KAAKC,MAAM1C,EAAE,iBAAiBuC,KAAK,gBAErD,IAAII,SAAQC,gBAAgB,kBAC1BC,QAASL,EACTM,kBAAmBhD,EAAMkC,iBAG3BhC,EAAE,uBAAuBsC,SAAS,sBAGpCrB,YAAa,WACXjB,EAAE,0BAA0B+C,KAAK,GAEjC/C,EAAE,qBAAqBoC,YAAY,cAIvCY,OAAOC,UAAUC,MAAM,WACrB,YAEAxD,MAAKG","file":"main.min.js.liquid","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global jQuery, $, document, Site, Modernizr, Shopify */\n\nSite = {\n  mobileThreshold: 601,\n  debounceTimer: null,\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    if ($('body').hasClass('template-product')) {\n      _this.Product.init();\n    }\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    if ($('#product-gallery').length) {\n      // debounce gallery\n      clearTimeout(_this.debounceTimer);\n\n      _this.debounceTimer = setTimeout(function () {\n        _this.Product.setGalleryDimensions();\n        clearTimeout(_this.debounceTimer);\n        _this.debounceTimer = null;\n      }, 1000);\n    }\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n\n};\n\nSite.Product = {\n  init: function() {\n    var _this = this;\n\n    if ($('#product-gallery').length) {\n      $('#product-gallery').imagesLoaded( function() {\n        _this.setGalleryDimensions();\n      });\n    }\n\n    if ($('#product-select').length) {\n      _this.productSelect();\n    }\n\n    if ($('#related-products').length) {\n      _this.pickRelated();\n    }\n  },\n\n  setGalleryDimensions: function() {\n    var _this = this;\n    var galleryWidth = 0;\n    var windowWidth = $(window).width();\n\n    $('.product-gallery-item').each(function() {\n      galleryWidth += $(this).width();\n    });\n\n    $('#product-gallery-row').width(galleryWidth + 1);\n\n    if (galleryWidth > windowWidth) {\n      var galleryContainerWidth = galleryWidth + (galleryWidth - windowWidth);\n\n      $('#product-gallery')\n        .width(galleryContainerWidth - 1)\n        .css('left', ((windowWidth / 2) - (galleryContainerWidth / 2)) + 'px');\n\n      $('#product-gallery-row').css('left', ((galleryContainerWidth / 2) - (galleryWidth / 2)) + 'px');\n\n      _this.bindGalleryDrag();\n\n    } else {\n\n      $('#product-gallery')\n        .width(galleryWidth)\n        .css('left', ((windowWidth / 2) - (galleryWidth / 2)) + 'px');\n\n      $('#product-gallery-row').css({\n        'left' : '0'\n      });\n\n      _this.unbindGalleryDrag();\n    }\n\n  },\n\n  bindGalleryDrag: function() {\n    $('#product-gallery-row').pep({\n      axis: 'x',\n      constrainTo: 'parent',\n      place: false,\n      useCSSTranslation: false\n    }).css('cursor', 'ew-resize');\n\n  },\n\n  unbindGalleryDrag: function() {\n    $.pep.unbind($('#product-gallery-row'));\n    $('#product-gallery-row').css('cursor', 'default');\n  },\n\n  selectCallback: function(variant, selector) {\n    if (variant && variant.available === true) {\n      $('#product-add-holder').removeClass('out-of-stock');\n      $('#add').removeAttr('disabled');\n    }\n    else {\n      // variant doesn't exist\n      $('#product-add-holder').addClass('out-of-stock');\n      $('#add').attr('disabled', 'disabled');\n    }\n  },\n\n  productSelect: function() {\n    var _this = this;\n    var productJson = JSON.parse($('#product-info').attr('data-product'));\n\n    new Shopify.OptionSelectors(\"product-select\", {\n      product: productJson,\n      onVariantSelected: _this.selectCallback\n    });\n\n    $('#product-add-holder').addClass('padding-top-small');\n  },\n\n  pickRelated: function() {\n    $('.related-products-item').pick(4);\n\n    $('#related-products').removeClass('u-hidden');\n  },\n};\n\njQuery(document).ready(function () {\n  'use strict';\n\n  Site.init();\n\n});\n"]}