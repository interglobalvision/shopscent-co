{"version":3,"sources":["main.js.liquid"],"names":["onYouTubeIframeAPIReady","Site","Index","Video","APIReady","mobileThreshold","debounceTimer","isIndex","$","length","init","_this","this","hasClass","Blog","Doodle","tilt","reset","document","ready","Product","window","resize","onResize","getHeaderTop","find","scaleIframes","clearTimeout","setTimeout","setGalleryDimensions","fixWidows","each","string","html","replace","location","href","indexOf","history","replaceState","title","scrollToShop","bindScroll","bindShopClick","detectAutoplay","remove","headerTop","innerHeight","outerHeight","setSticky","on","scrollPos","scrollTop","removeClass","addClass","event","preventDefault","trigger","shopTop","height","stop","animate","$video","timeout","undefined","tag","createElement","firstScriptTag","getElementsByTagName","src","parentNode","insertBefore","player","YT","Player","events","onReady","onStateChange","onPlayerStateChange","bind","target","playVideo","data","duration","getDuration","css","seekTo","$gallery","$galleryRow","imagesLoaded","productSelect","pickRelated","galleryWidth","windowWidth","width","getBoundingClientRect","galleryContainerWidth","bindGalleryDrag","left","unbindGalleryDrag","pep","axis","constrainTo","place","useCSSTranslation","unbind","selectCallback","variant","available","removeAttr","attr","productJson","JSON","parse","Shopify","OptionSelectors","product","onVariantSelected","pick","$blogItem","$blogIframes","origWidth","origHeight","iframeWidth","heightRatio","setAttribute","time","keyframe","elem","drawPath","getPathLength","el","console","log","pathCoords","get","pathLength","getTotalLength","define","name","0%","stroke-dashoffset","50%","100%","stroke-dasharray","opacity","playKeyframe","timingFunction","iterationCount"],"mappings":"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","file":"main.min.js.liquid","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, document, Site, Shopify, detectAutoplay, YT */\n\nSite = {\n  mobileThreshold: 601,\n  debounceTimer: null,\n  isIndex: $('.index-content').length,\n  init: function() {\n    var _this = this;\n\n    if (_this.isIndex) {\n      _this.Index.init();\n    }\n\n    if ($('body#about').length || $('body').hasClass('template-article')) {\n      _this.Blog.init();\n    }\n\n    if ($('#doodle').length) {\n      _this.Doodle.init();\n    }\n\n    $('.js-tilt').tilt({\n      reset: false,\n    });\n\n    $(document).ready(function () {\n\n      if ($('body').hasClass('template-product')) {\n        _this.Product.init();\n      }\n\n      $(window).resize(function(){\n        _this.onResize();\n      });\n\n    });\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    if (_this.isIndex) {\n      // reset header offset top and sticky state on resize\n      _this.Index.getHeaderTop();\n    }\n\n    if ($('.blog-item, .blog-item-mobile, .blog-item-single').find('iframe').length) {\n      _this.Blog.scaleIframes();\n    }\n\n    if ($('#product-gallery').length) {\n      // debounce resize event for product gallery\n      clearTimeout(_this.debounceTimer);\n\n      _this.debounceTimer = setTimeout(function () {\n        _this.Product.setGalleryDimensions();\n        clearTimeout(_this.debounceTimer);\n        _this.debounceTimer = null;\n      }, 100);\n    }\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n\n};\n\nSite.Index = {\n  init: function() {\n    var _this = this;\n\n    if (window.location.href.indexOf('#shop') !== -1) {\n      // url has #shop\n\n      // remove #shop from url in address bar\n      history.replaceState({}, document.title, '/');\n\n      // scrollto shop after 300ms\n      setTimeout(function(){\n        _this.scrollToShop();\n      }, 300);\n    }\n\n    if ($('.index-header').length) {\n      // bind stickyheader and scrollto shop\n      _this.getHeaderTop();\n      _this.bindScroll();\n      _this.bindShopClick();\n    }\n\n    // if youtube video in splash, detect autoplay\n    // if mobile browser detected, remove youtube video\n    if ($('#front-video').length) {\n      _this.Video.init();\n\n      detectAutoplay(2000, function() {\n        _this.Video.remove();\n      });\n    }\n  },\n\n  getHeaderTop: function() {\n    var _this = this;\n\n    _this.headerTop = $(window).innerHeight() - $('#header').outerHeight();\n\n    _this.setSticky();\n  },\n\n  bindScroll: function() {\n    var _this = this;\n\n    $(window).on('scroll', function() {\n      _this.setSticky();\n    });\n  },\n\n  setSticky: function() {\n    var _this = this;\n    var scrollPos = $(window).scrollTop();\n\n    // stick header\n    if (scrollPos >= _this.headerTop){\n      $('#header').removeClass('index-header');\n    }\n    // unstick header\n    if (scrollPos < _this.headerTop){\n      $('#header').addClass('index-header');\n    }\n  },\n\n  bindShopClick: function() {\n    var _this = this;\n\n    // Shop nav link clicked on index page\n    $('.js-scroll-to-shop').on('click', function(event){\n      event.preventDefault();\n\n      _this.scrollToShop();\n\n      // unfocus Shop nav link\n      $(this).trigger('blur');\n    });\n  },\n\n  scrollToShop: function() {\n    var shopTop = $('#front-splash').height();\n\n    $('body').stop().animate({scrollTop: shopTop}, '500', 'swing');\n  },\n\n  Video: {\n    $video: $('#front-video'),\n    timeout: undefined,\n\n    init: function() {\n      var _this = this;\n\n      // async add the Youtube player API library\n      var tag = document.createElement('script');\n      var firstScriptTag = document.getElementsByTagName('script')[0];\n\n      tag.src = 'https://www.youtube.com/iframe_api';\n      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n    },\n\n    APIReady: function() {\n      // called by the global function triggered on API ready\n      var _this = this;\n\n      _this.player = new YT.Player('front-video', {\n        events: {\n          'onReady': _this.onReady,\n          'onStateChange': _this.onPlayerStateChange.bind(_this)\n        }\n      });\n    },\n\n    onReady: function(event) {\n      event.target.playVideo();\n    },\n\n    onPlayerStateChange: function(event) {\n      var _this = this;\n\n      // video is playing if value is 1\n      if (event.data === 1) {\n        var duration = event.target.getDuration();\n\n        _this.$video.css('opacity', 1);\n\n        // set a timeout 100ms shorter than the length of the video. when it fires it restarts the video. this stops the reload when doing Youtube loopled playlist\n        _this.timeout = setTimeout(function() {\n          event.target.seekTo(0);\n        }, (duration * 1000) - 100);\n      }\n    },\n\n    remove: function() {\n      var _this = this;\n\n      _this.$video.remove();\n    },\n  }\n};\n\nSite.Product = {\n  $gallery: $('#product-gallery'),\n  $galleryRow: $('#product-gallery-row'),\n  init: function() {\n    var _this = this;\n\n    if (_this.$gallery.length) {\n      _this.$gallery.imagesLoaded( function() {\n        _this.setGalleryDimensions();\n      });\n    }\n\n    if ($('#product-select').length) {\n      _this.productSelect();\n    }\n\n    if ($('#related-products').length) {\n      _this.pickRelated();\n    }\n  },\n\n  setGalleryDimensions: function() {\n    var _this = this;\n    var galleryWidth = 0;\n    var windowWidth = $(window).width();\n\n    // get total width of gallery items\n    $('.product-gallery-item').each(function() {\n      // using getBoundingClientRect because jQuery width() rounds values\n      galleryWidth += $(this)[0].getBoundingClientRect().width;\n    });\n\n    _this.$galleryRow.css('transition', 'none');\n\n    //  set gallery width to width of gallery items\n    _this.$galleryRow.width(galleryWidth);\n\n    if (galleryWidth > windowWidth) {\n      // gallery is more than window width\n      var galleryContainerWidth = galleryWidth + (galleryWidth - windowWidth);\n\n      // set the gallery container width and horizontally center it\n      _this.$gallery\n        .width(galleryContainerWidth)\n        .css('left', ((windowWidth / 2) - (galleryContainerWidth / 2)) + 'px');\n\n      // horizontally center gallery in container\n      _this.$galleryRow.css('left', ((galleryContainerWidth / 2) - (galleryWidth / 2)) + 'px');\n\n      // bind dragging\n      _this.bindGalleryDrag();\n\n    } else {\n      // gallery is less than window width\n\n      // center the gallery container. same width as gallery\n      _this.$gallery\n        .width(galleryWidth)\n        .css('left', ((windowWidth / 2) - (galleryWidth / 2)) + 'px');\n\n      // 0 the gallery position in its container\n      _this.$galleryRow.css({\n        'left' : '0'\n      });\n\n      // unbind dragging\n      _this.unbindGalleryDrag();\n    }\n\n  },\n\n  bindGalleryDrag: function() {\n    var _this = this;\n\n    // bind the drag and change cursor to arrows\n    _this.$galleryRow.pep({\n      axis: 'x',\n      constrainTo: 'parent',\n      place: false,\n      useCSSTranslation: false\n    }).css('cursor', 'ew-resize');\n  },\n\n  unbindGalleryDrag: function() {\n    var _this = this;\n\n    // unbind the drag and change cursor to default\n    $.pep.unbind(_this.$galleryRow);\n    _this.$galleryRow.css('cursor', 'default');\n  },\n\n  selectCallback: function(variant) {\n    if (variant && variant.available === true) {\n      // variant exists. hide out-of-stock notice and enable button\n      $('#product-add-holder').removeClass('out-of-stock');\n      $('#add').removeAttr('disabled');\n    }\n    else {\n      // variant doesn't exist. show out-of-stock notice and disable button\n      $('#product-add-holder').addClass('out-of-stock');\n      $('#add').attr('disabled', 'disabled');\n    }\n  },\n\n  productSelect: function() {\n    var _this = this;\n    var productJson = JSON.parse($('#product-info').attr('data-product'));\n\n    // replaces variant select with multiple variant selects.\n    // handles select callback\n    new Shopify.OptionSelectors(\"product-select\", {\n      product: productJson,\n      onVariantSelected: _this.selectCallback\n    });\n\n    // add some extra padding-top to add-to-cart button\n    // container when we have variant selects.\n    $('#product-add-holder').addClass('padding-top-small');\n  },\n\n  pickRelated: function() {\n    // keeps random 4 related products and removes others\n    $('.related-products-item').pick(4);\n\n    $('#related-products').removeClass('u-hidden');\n  },\n};\n\nSite.Blog = {\n  $blogItem: $('.blog-item, .blog-item-mobile, .blog-item-single'),\n  $blogIframes: null,\n  init: function() {\n    var _this = this;\n\n    if (_this.$blogItem.length) {\n      _this.$blogIframes = _this.$blogItem.find('iframe');\n\n      if (_this.$blogIframes.length) {\n        _this.scaleIframes();\n      }\n    }\n  },\n\n  scaleIframes: function() {\n    var _this = this;\n\n    _this.$blogIframes.each(function() {\n      var origWidth = $(this).attr('width'),\n        origHeight = $(this).attr('height'),\n        iframeWidth = $(this).width(),\n        heightRatio = origHeight / origWidth;\n\n      $(this).css('height', iframeWidth * heightRatio + 'px');\n    });\n  }\n};\n\nSite.Doodle = {\n  init: function() {\n    var _this = this;\n\n    // stretch doodle to fit viewport\n    $('#doodle svg')[0].setAttribute('preserveAspectRatio', 'none');\n\n    var time = 0;\n    _this.keyframe = 1;\n\n    // run drawPath animation on each path or polyline elem\n    $('#doodle svg path, #doodle svg polyline').each(function() {\n      var elem = this;\n\n      setTimeout(function() {\n        _this.drawPath($(elem));\n      }, time);\n\n      time += 1000;\n    });\n  },\n\n  getPathLength: function(el){\n    console.log('getPathLength');\n    var pathCoords = el.get(0);\n    var pathLength = pathCoords.getTotalLength();\n    return pathLength;\n  },\n\n  drawPath: function(el) {\n    console.log('drawPath');\n    var _this = this;\n    var pathLength = _this.getPathLength(el);\n\n    $.keyframe.define([{\n      name: 'keyframe-' + _this.keyframe,\n      '0%':   {'stroke-dashoffset':pathLength},\n      '50%':  {'stroke-dashoffset':0},\n      '100%': {'stroke-dashoffset':pathLength}\n    }]);\n\n    el.css({\n      'stroke-dasharray': pathLength,\n      'opacity': 1\n    }).playKeyframe({\n      name: 'keyframe-' + _this.keyframe,\n      timingFunction: 'linear',\n      iterationCount: 'infinite',\n      duration: '10s'\n    });\n\n    _this.keyframe++;\n  },\n};\n\nSite.init();\n\n// Youtube player API triggers this function when ready\nfunction onYouTubeIframeAPIReady() {\n  Site.Index.Video.APIReady();\n}\n"]}