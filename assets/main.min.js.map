{"version":3,"sources":["main.js.liquid"],"names":["Site","mobileThreshold","debounceTimer","init","_this","this","$","window","resize","onResize","hasClass","Index","Product","tilt","reset","getHeaderTop","length","clearTimeout","setTimeout","setGalleryDimensions","fixWidows","each","string","html","replace","location","href","indexOf","history","replaceState","document","title","scrollToShop","bindSticky","bindScroll","detectAutoplay","remove","headerTop","offset","top","on","scrollPos","scrollTop","removeClass","addClass","event","preventDefault","trigger","shopTop","height","stop","animate","imagesLoaded","productSelect","pickRelated","galleryWidth","windowWidth","width","getBoundingClientRect","css","galleryContainerWidth","bindGalleryDrag","left","unbindGalleryDrag","pep","axis","constrainTo","place","useCSSTranslation","unbind","selectCallback","variant","selector","available","removeAttr","attr","productJson","JSON","parse","Shopify","OptionSelectors","product","onVariantSelected","pick","jQuery","ready"],"mappings":"AAGAA,MACEC,gBAAiB,IACjBC,cAAe,KACfC,KAAM,WACJ,GAAIC,GAAQC,IAEZC,GAAEC,QAAQC,OAAO,WACfJ,EAAMK,aAGJH,EAAE,QAAQI,SAAS,mBACrBN,EAAMO,MAAMR,OAGVG,EAAE,QAAQI,SAAS,qBACrBN,EAAMQ,QAAQT,OAGhBG,EAAE,YAAYO,MACZC,OAAO,KAKXL,SAAU,WACR,GAAIL,GAAQC,IAERC,GAAE,WAAWI,SAAS,iBAExBN,EAAMO,MAAMI,eAGVT,EAAE,oBAAoBU,SAExBC,aAAab,EAAMF,eAEnBE,EAAMF,cAAgBgB,WAAW,WAC/Bd,EAAMQ,QAAQO,uBACdF,aAAab,EAAMF,eACnBE,EAAMF,cAAgB,MACrB,OAIPkB,UAAW,WAETd,EAAE,kBAAkBe,KAAK,WACvB,GAAIC,GAAShB,EAAED,MAAMkB,MACrBD,GAASA,EAAOE,QAAQ,YAAY,YACpClB,EAAED,MAAMkB,KAAKD,OAOnBtB,KAAKW,OACHR,KAAM,WACJ,GAAIC,GAAQC,IAERE,QAAOkB,SAASC,KAAKC,QAAQ,WAAY,IAI3CC,QAAQC,gBAAiBC,SAASC,MAAO,KAGzCb,WAAW,WACTd,EAAM4B,gBACL,MAGD1B,EAAE,WAAWI,SAAS,kBAExBN,EAAM6B,aACN7B,EAAM8B,cAKJ5B,EAAE,gBAAgBU,QACpBmB,eAAe,IAAM,WACnB7B,EAAE,gBAAgB8B,YAKxBrB,aAAc,WACZ,GAAIX,GAAQC,IAEZD,GAAMiC,UAAY/B,EAAE,WAAWgC,SAASC,KAG1CN,WAAY,WACV,GAAI7B,GAAQC,IAEZD,GAAMW,eAENT,EAAEC,QAAQiC,GAAG,SAAU,WACrB,GAAIC,GAAYnC,EAAED,MAAMqC,WAGpBD,IAAarC,EAAMiC,WACrB/B,EAAE,WAAWqC,YAAY,gBAIvBF,EAAYrC,EAAMiC,WACpB/B,EAAE,WAAWsC,SAAS,mBAK5BV,WAAY,WACV,GAAI9B,GAAQC,IAGZC,GAAE,sBAAsBkC,GAAG,QAAS,SAASK,GAC3CA,EAAMC,iBAEN1C,EAAM4B,eAGN1B,EAAED,MAAM0C,QAAQ,WAIpBf,aAAc,WACZ,GAAIgB,GAAU1C,EAAE,iBAAiB2C,QAEjC3C,GAAE,QAAQ4C,OAAOC,SAAST,UAAWM,GAAU,MAAO,WAI1DhD,KAAKY,SACHT,KAAM,WACJ,GAAIC,GAAQC,IAERC,GAAE,oBAAoBU,QACxBV,EAAE,oBAAoB8C,aAAc,WAClChD,EAAMe,yBAINb,EAAE,mBAAmBU,QACvBZ,EAAMiD,gBAGJ/C,EAAE,qBAAqBU,QACzBZ,EAAMkD,eAIVnC,qBAAsB,WACpB,GAAIf,GAAQC,KACRkD,EAAe,EACfC,EAAclD,EAAEC,QAAQkD,OAa5B,IAVAnD,EAAE,yBAAyBe,KAAK,WAE9BkC,GAAgBjD,EAAED,MAAM,GAAGqD,wBAAwBD,QAGrDnD,EAAE,wBAAwBqD,IAAI,aAAc,QAG5CrD,EAAE,wBAAwBmD,MAAMF,GAE5BA,EAAeC,EAAa,CAE9B,GAAII,GAAwBL,GAAgBA,EAAeC,EAG3DlD,GAAE,oBACCmD,MAAMG,GACND,IAAI,OAAUH,EAAc,EAAMI,EAAwB,EAAM,MAGnEtD,EAAE,wBAAwBqD,IAAI,OAAUC,EAAwB,EAAML,EAAe,EAAM,MAG3FnD,EAAMyD,sBAMNvD,GAAE,oBACCmD,MAAMF,GACNI,IAAI,OAAUH,EAAc,EAAMD,EAAe,EAAM,MAG1DjD,EAAE,wBAAwBqD,KACxBG,KAAS,MAIX1D,EAAM2D,qBAKVF,gBAAiB,WAEfvD,EAAE,wBAAwB0D,KACxBC,KAAM,IACNC,YAAa,SACbC,OAAO,EACPC,mBAAmB,IAClBT,IAAI,SAAU,cAGnBI,kBAAmB,WAEjBzD,EAAE0D,IAAIK,OAAO/D,EAAE,yBACfA,EAAE,wBAAwBqD,IAAI,SAAU,YAG1CW,eAAgB,SAASC,EAASC,GAC5BD,GAAWA,EAAQE,aAAc,GAEnCnE,EAAE,uBAAuBqC,YAAY,gBACrCrC,EAAE,QAAQoE,WAAW,cAIrBpE,EAAE,uBAAuBsC,SAAS,gBAClCtC,EAAE,QAAQqE,KAAK,WAAY,cAI/BtB,cAAe,WACb,GAAIjD,GAAQC,KACRuE,EAAcC,KAAKC,MAAMxE,EAAE,iBAAiBqE,KAAK,gBAIrD,IAAII,SAAQC,gBAAgB,kBAC1BC,QAASL,EACTM,kBAAmB9E,EAAMkE,iBAK3BhE,EAAE,uBAAuBsC,SAAS,sBAGpCU,YAAa,WAEXhD,EAAE,0BAA0B6E,KAAK,GAEjC7E,EAAE,qBAAqBqC,YAAY,cAIvCyC,OAAOtD,UAAUuD,MAAM,WACrB,YAEArF,MAAKG","file":"main.min.js.liquid","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global jQuery, $, document, Site, Modernizr, Shopify */\n\nSite = {\n  mobileThreshold: 601,\n  debounceTimer: null,\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    if ($('body').hasClass('template-index')) {\n      _this.Index.init();\n    }\n\n    if ($('body').hasClass('template-product')) {\n      _this.Product.init();\n    }\n\n    $('.js-tilt').tilt({\n      reset: false,\n    });\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    if ($('#header').hasClass('index-header')) {\n      // reset header offset top on resize\n      _this.Index.getHeaderTop();\n    }\n\n    if ($('#product-gallery').length) {\n      // debounce resize event for product gallery\n      clearTimeout(_this.debounceTimer);\n\n      _this.debounceTimer = setTimeout(function () {\n        _this.Product.setGalleryDimensions();\n        clearTimeout(_this.debounceTimer);\n        _this.debounceTimer = null;\n      }, 100);\n    }\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n\n};\n\nSite.Index = {\n  init: function() {\n    var _this = this;\n\n    if (window.location.href.indexOf('#shop') != -1) {\n      // url has #shop\n\n      // remove #shop from url in address bar\n      history.replaceState({}, document.title, '/');\n\n      // scrollto shop after 300ms\n      setTimeout(function(){\n        _this.scrollToShop();\n      }, 300);\n    }\n\n    if ($('#header').hasClass('index-header')) {\n      // bind stickyheader and scrollto shop\n      _this.bindSticky();\n      _this.bindScroll();\n    }\n\n    // if youtube video in splash, detect autoplay\n    // if mobile browser detected, remove youtube video\n    if ($('#front-video').length) {\n      detectAutoplay(2000, function() {\n        $('#front-video').remove();\n      });\n    }\n  },\n\n  getHeaderTop: function() {\n    var _this = this;\n\n    _this.headerTop = $('#header').offset().top;\n  },\n\n  bindSticky: function() {\n    var _this = this;\n\n    _this.getHeaderTop();\n\n    $(window).on('scroll', function() {\n      var scrollPos = $(this).scrollTop();\n\n      // stick header\n      if (scrollPos >= _this.headerTop){\n        $('#header').removeClass('index-header');\n      }\n\n      // unstick header\n      if (scrollPos < _this.headerTop){\n        $('#header').addClass('index-header');\n      }\n    });\n  },\n\n  bindScroll: function() {\n    var _this = this;\n\n    // Shop nav link clicked on index page\n    $('.js-scroll-to-shop').on('click', function(event){\n      event.preventDefault();\n\n      _this.scrollToShop();\n\n      // unfocus Shop nav link\n      $(this).trigger('blur');\n    });\n  },\n\n  scrollToShop: function() {\n    var shopTop = $('#front-splash').height();\n\n    $('body').stop().animate({scrollTop: shopTop}, '500', 'swing');\n  },\n};\n\nSite.Product = {\n  init: function() {\n    var _this = this;\n\n    if ($('#product-gallery').length) {\n      $('#product-gallery').imagesLoaded( function() {\n        _this.setGalleryDimensions();\n      });\n    }\n\n    if ($('#product-select').length) {\n      _this.productSelect();\n    }\n\n    if ($('#related-products').length) {\n      _this.pickRelated();\n    }\n  },\n\n  setGalleryDimensions: function() {\n    var _this = this;\n    var galleryWidth = 0;\n    var windowWidth = $(window).width();\n\n    // get total width of gallery items\n    $('.product-gallery-item').each(function() {\n      // using getBoundingClientRect because jQuery width() rounds values\n      galleryWidth += $(this)[0].getBoundingClientRect().width;\n    });\n\n    $('#product-gallery-row').css('transition', 'none');\n\n    //  set gallery width to width of gallery items\n    $('#product-gallery-row').width(galleryWidth);\n\n    if (galleryWidth > windowWidth) {\n      // gallery is more than window width\n      var galleryContainerWidth = galleryWidth + (galleryWidth - windowWidth);\n\n      // set the gallery container width and horizontally center it\n      $('#product-gallery')\n        .width(galleryContainerWidth)\n        .css('left', ((windowWidth / 2) - (galleryContainerWidth / 2)) + 'px');\n\n      // horizontally center gallery in container\n      $('#product-gallery-row').css('left', ((galleryContainerWidth / 2) - (galleryWidth / 2)) + 'px');\n\n      // bind dragging\n      _this.bindGalleryDrag();\n\n    } else {\n      // gallery is less than window width\n\n      // center the gallery container. same width as gallery\n      $('#product-gallery')\n        .width(galleryWidth)\n        .css('left', ((windowWidth / 2) - (galleryWidth / 2)) + 'px');\n\n      // 0 the gallery position in its container\n      $('#product-gallery-row').css({\n        'left' : '0'\n      });\n\n      // unbind dragging\n      _this.unbindGalleryDrag();\n    }\n\n  },\n\n  bindGalleryDrag: function() {\n    // bind the drag and change cursor to arrows\n    $('#product-gallery-row').pep({\n      axis: 'x',\n      constrainTo: 'parent',\n      place: false,\n      useCSSTranslation: false\n    }).css('cursor', 'ew-resize');\n  },\n\n  unbindGalleryDrag: function() {\n    // unbind the drag and change cursor to default\n    $.pep.unbind($('#product-gallery-row'));\n    $('#product-gallery-row').css('cursor', 'default');\n  },\n\n  selectCallback: function(variant, selector) {\n    if (variant && variant.available === true) {\n      // variant exists. hide out-of-stock notice and enable button\n      $('#product-add-holder').removeClass('out-of-stock');\n      $('#add').removeAttr('disabled');\n    }\n    else {\n      // variant doesn't exist. show out-of-stock notice and disable button\n      $('#product-add-holder').addClass('out-of-stock');\n      $('#add').attr('disabled', 'disabled');\n    }\n  },\n\n  productSelect: function() {\n    var _this = this;\n    var productJson = JSON.parse($('#product-info').attr('data-product'));\n\n    // replaces variant select with multiple variant selects.\n    // handles select callback\n    new Shopify.OptionSelectors(\"product-select\", {\n      product: productJson,\n      onVariantSelected: _this.selectCallback\n    });\n\n    // add some extra padding-top to add-to-cart button\n    // container when we have variant selects.\n    $('#product-add-holder').addClass('padding-top-small');\n  },\n\n  pickRelated: function() {\n    // keeps random 4 related products and removes others\n    $('.related-products-item').pick(4);\n\n    $('#related-products').removeClass('u-hidden');\n  },\n};\n\njQuery(document).ready(function () {\n  'use strict';\n\n  Site.init();\n\n});\n"]}