{"version":3,"sources":["main.js.liquid"],"names":["Site","mobileThreshold","debounceTimer","isIndex","$","length","init","_this","this","window","resize","onResize","Index","hasClass","Product","Blog","Doodle","tilt","reset","getHeaderTop","find","scaleIframes","clearTimeout","setTimeout","setGalleryDimensions","fixWidows","each","string","html","replace","location","href","indexOf","history","replaceState","document","title","scrollToShop","bindScroll","bindShopClick","detectAutoplay","remove","css","headerTop","innerHeight","outerHeight","setSticky","on","scrollPos","scrollTop","removeClass","addClass","event","preventDefault","trigger","shopTop","height","stop","animate","$gallery","$galleryRow","imagesLoaded","productSelect","pickRelated","galleryWidth","windowWidth","width","getBoundingClientRect","galleryContainerWidth","bindGalleryDrag","left","unbindGalleryDrag","pep","axis","constrainTo","place","useCSSTranslation","unbind","selectCallback","variant","available","removeAttr","attr","productJson","JSON","parse","Shopify","OptionSelectors","product","onVariantSelected","pick","$blogItem","$blogIframes","origWidth","origHeight","iframeWidth","heightRatio","keyframeSupport","keyframe","isSupported","setAttribute","time","elem","drawPath","getPathLength","el","pathCoords","get","pathLength","getTotalLength","define","name","0%","stroke-dashoffset","50%","100%","stroke-dasharray","opacity","playKeyframe","timingFunction","iterationCount","duration","jQuery","ready"],"mappings":"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","file":"main.min.js.liquid","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global jQuery, $, document, Site, Modernizr, Shopify, detectAutoplay */\n\nSite = {\n  mobileThreshold: 601,\n  debounceTimer: null,\n  isIndex: $('.index-content').length,\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    if (_this.isIndex) {\n      _this.Index.init();\n    }\n\n    if ($('body').hasClass('template-product')) {\n      _this.Product.init();\n    }\n\n    if ($('body#about').length || $('body').hasClass('template-article')) {\n      _this.Blog.init();\n    }\n\n    if ($('#doodle').length) {\n      _this.Doodle.init();\n    }\n\n    $('.js-tilt').tilt({\n      reset: false,\n    });\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    if (_this.isIndex) {\n      // reset header offset top and sticky state on resize\n      _this.Index.getHeaderTop();\n    }\n\n    if ($('.blog-item, .blog-item-mobile, .blog-item-single').find('iframe').length) {\n      _this.Blog.scaleIframes();\n    }\n\n    if ($('#product-gallery').length) {\n      // debounce resize event for product gallery\n      clearTimeout(_this.debounceTimer);\n\n      _this.debounceTimer = setTimeout(function () {\n        _this.Product.setGalleryDimensions();\n        clearTimeout(_this.debounceTimer);\n        _this.debounceTimer = null;\n      }, 100);\n    }\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n\n};\n\nSite.Index = {\n  init: function() {\n    var _this = this;\n\n    if (window.location.href.indexOf('#shop') !== -1) {\n      // url has #shop\n\n      // remove #shop from url in address bar\n      history.replaceState({}, document.title, '/');\n\n      // scrollto shop after 300ms\n      setTimeout(function(){\n        _this.scrollToShop();\n      }, 300);\n    }\n\n    if ($('.index-header').length) {\n      // bind stickyheader and scrollto shop\n      _this.getHeaderTop();\n      _this.bindScroll();\n      _this.bindShopClick();\n    }\n\n    // if youtube video in splash, detect autoplay\n    // if mobile browser detected, remove youtube video\n    if ($('#front-video').length) {\n      detectAutoplay(2000, function() {\n        $('#front-video').remove();\n        $('#front-splash').css('background-size', 'cover');\n      });\n    }\n  },\n\n  getHeaderTop: function() {\n    var _this = this;\n\n    _this.headerTop = $(window).innerHeight() - $('#header').outerHeight();\n\n    _this.setSticky();\n  },\n\n  bindScroll: function() {\n    var _this = this;\n\n    $(window).on('scroll', function() {\n      _this.setSticky();\n    });\n  },\n\n  setSticky: function() {\n    var _this = this;\n    var scrollPos = $(window).scrollTop();\n\n    // stick header\n    if (scrollPos >= _this.headerTop){\n      $('#header').removeClass('index-header');\n    }\n    // unstick header\n    if (scrollPos < _this.headerTop){\n      $('#header').addClass('index-header');\n    }\n  },\n\n  bindShopClick: function() {\n    var _this = this;\n\n    // Shop nav link clicked on index page\n    $('.js-scroll-to-shop').on('click', function(event){\n      event.preventDefault();\n\n      _this.scrollToShop();\n\n      // unfocus Shop nav link\n      $(this).trigger('blur');\n    });\n  },\n\n  scrollToShop: function() {\n    var shopTop = $('#front-splash').height();\n\n    $('body').stop().animate({scrollTop: shopTop}, '500', 'swing');\n  },\n};\n\nSite.Product = {\n  $gallery: $('#product-gallery'),\n  $galleryRow: $('#product-gallery-row'),\n  init: function() {\n    var _this = this;\n\n    if (_this.$gallery.length) {\n      _this.$gallery.imagesLoaded( function() {\n        _this.setGalleryDimensions();\n      });\n    }\n\n    if ($('#product-select').length) {\n      _this.productSelect();\n    }\n\n    if ($('#related-products').length) {\n      _this.pickRelated();\n    }\n  },\n\n  setGalleryDimensions: function() {\n    var _this = this;\n    var galleryWidth = 0;\n    var windowWidth = $(window).width();\n\n    // get total width of gallery items\n    $('.product-gallery-item').each(function() {\n      // using getBoundingClientRect because jQuery width() rounds values\n      galleryWidth += $(this)[0].getBoundingClientRect().width;\n    });\n\n    _this.$galleryRow.css('transition', 'none');\n\n    //  set gallery width to width of gallery items\n    _this.$galleryRow.width(galleryWidth);\n\n    if (galleryWidth > windowWidth) {\n      // gallery is more than window width\n      var galleryContainerWidth = galleryWidth + (galleryWidth - windowWidth);\n\n      // set the gallery container width and horizontally center it\n      _this.$gallery\n        .width(galleryContainerWidth)\n        .css('left', ((windowWidth / 2) - (galleryContainerWidth / 2)) + 'px');\n\n      // horizontally center gallery in container\n      _this.$galleryRow.css('left', ((galleryContainerWidth / 2) - (galleryWidth / 2)) + 'px');\n\n      // bind dragging\n      _this.bindGalleryDrag();\n\n    } else {\n      // gallery is less than window width\n\n      // center the gallery container. same width as gallery\n      _this.$gallery\n        .width(galleryWidth)\n        .css('left', ((windowWidth / 2) - (galleryWidth / 2)) + 'px');\n\n      // 0 the gallery position in its container\n      _this.$galleryRow.css({\n        'left' : '0'\n      });\n\n      // unbind dragging\n      _this.unbindGalleryDrag();\n    }\n\n  },\n\n  bindGalleryDrag: function() {\n    var _this = this;\n\n    // bind the drag and change cursor to arrows\n    _this.$galleryRow.pep({\n      axis: 'x',\n      constrainTo: 'parent',\n      place: false,\n      useCSSTranslation: false\n    }).css('cursor', 'ew-resize');\n  },\n\n  unbindGalleryDrag: function() {\n    var _this = this;\n\n    // unbind the drag and change cursor to default\n    $.pep.unbind(_this.$galleryRow);\n    _this.$galleryRow.css('cursor', 'default');\n  },\n\n  selectCallback: function(variant) {\n    if (variant && variant.available === true) {\n      // variant exists. hide out-of-stock notice and enable button\n      $('#product-add-holder').removeClass('out-of-stock');\n      $('#add').removeAttr('disabled');\n    }\n    else {\n      // variant doesn't exist. show out-of-stock notice and disable button\n      $('#product-add-holder').addClass('out-of-stock');\n      $('#add').attr('disabled', 'disabled');\n    }\n  },\n\n  productSelect: function() {\n    var _this = this;\n    var productJson = JSON.parse($('#product-info').attr('data-product'));\n\n    // replaces variant select with multiple variant selects.\n    // handles select callback\n    new Shopify.OptionSelectors(\"product-select\", {\n      product: productJson,\n      onVariantSelected: _this.selectCallback\n    });\n\n    // add some extra padding-top to add-to-cart button\n    // container when we have variant selects.\n    $('#product-add-holder').addClass('padding-top-small');\n  },\n\n  pickRelated: function() {\n    // keeps random 4 related products and removes others\n    $('.related-products-item').pick(4);\n\n    $('#related-products').removeClass('u-hidden');\n  },\n};\n\nSite.Blog = {\n  $blogItem: $('.blog-item, .blog-item-mobile, .blog-item-single'),\n  $blogIframes: null,\n  init: function() {\n    var _this = this;\n\n    if (_this.$blogItem.length) {\n      _this.$blogIframes = _this.$blogItem.find('iframe');\n\n      if (_this.$blogIframes.length) {\n        _this.scaleIframes();\n      }\n    }\n  },\n\n  scaleIframes: function() {\n    var _this = this;\n\n    _this.$blogIframes.each(function() {\n      var origWidth = $(this).attr('width'),\n        origHeight = $(this).attr('height'),\n        iframeWidth = $(this).width(),\n        heightRatio = origHeight / origWidth;\n\n      $(this).css('height', iframeWidth * heightRatio + 'px');\n    });\n  }\n};\n\nSite.Doodle = {\n  init: function() {\n    var _this = this;\n    var keyframeSupport = $.keyframe.isSupported();\n\n    // stretch doodle to fit viewport\n    $('#doodle svg')[0].setAttribute('preserveAspectRatio', 'none');\n\n    if (keyframeSupport) {\n      // CSS keyframes supported unprefixed\n\n      var time = 0;\n      _this.keyframe = 1;\n\n      // run drawPath animation on each path or polyline elem\n      $('#doodle svg path, #doodle svg polyline').each(function() {\n        var elem = this;\n\n        setTimeout(function() {\n          _this.drawPath($(elem));\n        }, time);\n\n        time += 1000;\n      });\n    }\n  },\n\n  getPathLength: function(el){\n    var pathCoords = el.get(0);\n    var pathLength = pathCoords.getTotalLength();\n    return pathLength;\n  },\n\n  drawPath: function(el) {\n    var _this = this;\n    var pathLength = _this.getPathLength(el);\n\n    $.keyframe.define([{\n      name: 'keyframe-' + _this.keyframe,\n      '0%':   {'stroke-dashoffset':pathLength},\n      '50%':  {'stroke-dashoffset':0},\n      '100%': {'stroke-dashoffset':pathLength}\n    }]);\n\n    el.css({\n      'stroke-dasharray': pathLength,\n      'opacity': 1\n    }).playKeyframe({\n      name: 'keyframe-' + _this.keyframe,\n      timingFunction: 'linear',\n      iterationCount: 'infinite',\n      duration: '10s'\n    });\n\n    _this.keyframe++;\n  },\n}\n\njQuery(document).ready(function () {\n  'use strict';\n\n  Site.init();\n\n});\n"]}